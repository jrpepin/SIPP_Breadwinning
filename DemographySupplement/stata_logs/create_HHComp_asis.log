-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs/create_HHComp_asis.log
  log type:  text
 opened on:   6 Dec 2019, 14:51:53

. 
. 
. * I would love to turn off line wrap so the state is a single
. * continuous string.  This seems not to be possible.  The best
. * we can do is set the line length to 255.  That's about 20 times
. * too short so why bother.
. *
. * Also, I considered saving the state as a note in the dataset
. * but this generic do file can't assume there is a dataset at all.
. display "Starting random number generator state"
Starting random number generator state

. display "`c(rngstate)'"
XAA0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 000000000000000000000000000000000000000000000000000000000000000000000001000001391839

. 
. 
. set varabbrev off

. 
. macro list
S_FNDATE:        6 Dec 2019 14:51
S_FN:           C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/SIPP08_Processed/HHchangeWithRelationships.dta
ReS_Call:       version 15.1:
max_tc:         1
refmon:         4
adult_age:      18
penultimate_wave:
                14
second_wave:    2
final_wave:     15
first_wave:     1
replace:        replace
SIPP08keep:     C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/SIPP08_Processed
tempdir:        C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/stata_tmp
results:        C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//results
sipp2008_logs:  C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs
sipp2008_code:  C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//SIPP2008
childhh_base_code:
                C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement/
SIPP2008:       C:\Users\Joanna/Dropbox/Data/SIPP/SIPP2008
SIPP2008core:   C:\Users\Joanna\Dropbox\Data\SIPP\SIPP2008
SIPP2008tm:     C:\Users\Joanna\Dropbox\Data\SIPP\SIPP2008
SIPP08:         C:\Users\Joanna/Dropbox/Data/SIPP/SIPP2008
homedir:        C:\Users\Joanna
S_level:        95
F1:             help advice;
F2:             describe;
F7:             save
F8:             use
S_ADO:          BASE;SITE;.;PERSONAL;PLUS;OLDPLACE
S_StataMP:      MP
S_StataSE:      SE
S_FLAVOR:       Intercooled
S_OS:           Windows
S_OSDTL:        64-bit
S_MACH:         PC (64-bit x86-64)
_fname:         create_HHComp_asis
_logdir:        C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs
_2:             create_HHComp_asis
_1:             C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs
_0:             "C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs" "create_HHComp_asis"

. 
. pwd
C:\Users\Joanna\Dropbox\Repositories\SIPP_Breadwinning\DemographySupplement

. 
end of do-file

. 
. 
. do "`codedir'/`fname'"

. * Create a data file with one record for each coresident pair in each wave
. * Merge onto the file the relationships data created by unify_relationships.
. 
. 
. ****************************************************************************
. * create database with all pairs of coresident individuals in each wave
. ****************************************************************************
. use "$tempdir/allwaves"

. 
. keep SSUID SHHADID EPPPNUM SWAVE ERRP

. 
. sort SSUID SHHADID SWAVE

. 
. by SSUID SHHADID SWAVE:  gen HHmembers = _N  /* Number the people in the household in each wave. */

. 
. * merge in age of other person in the household to save as "to_age"
. merge 1:1 SSUID EPPPNUM SWAVE using "$tempdir/demo_long_interviews.dta", keepusing(adj_age)
(label esex already defined)
(label eorigin already defined)
(label ebornus already defined)
(label tage already defined)
(label errp already defined)
(label ems already defined)
(label etypmom already defined)
(label etypdad already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                         1,279,471  (_merge==3)
    -----------------------------------------

. 
. assert _merge==3

. 
. drop _merge

. 
. rename EPPPNUM relto

. rename ERRP ERRPto

. rename adj_age to_age

. 
. save "$tempdir/to", $replace
(note: file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/stata_tmp/to.dta not found)
file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/stata_tmp/to.dta saved

. 
. use "$tempdir/allwaves", clear

. 
. keep SSUID SHHADID EPPPNUM SWAVE ERRP

. 
. rename EPPPNUM relfrom

. rename ERRP ERRPfrom

. 
. joinby SSUID SHHADID SWAVE using "$tempdir/to"  

. 
. * drop pairs of ego to self
. drop if relto==relfrom
(1,279,471 observations deleted)

. 
. save "$tempdir/pairwise_bywave", $replace
(note: file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/stata_tmp/pairwise_bywave.dta not found)
file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/stata_tmp/pairwise_bywave.dta saved

. 
. /*
> ********************************************************************************
> * for the purpose of checking how many pairs of individuals are represented in 
> * the unified relationships, create a pairwise database for all waves
> ********************************************************************************
> 
> duplicates drop SSUID relfrom relto, force
> 
> drop SWAVE
> 
> save "$tempdir/pairwise", $replace
> 
> */
. 
. use "$tempdir/pairwise_bywave", clear

. 
. merge m:1 SSUID relfrom relto SWAVE using "$tempdir/relationship_pairs_bywave"
(note: variable relfrom was int, now float to accommodate using data's values)
(note: variable relto was int, now float to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                         1,030
        from master                     1,030  (_merge==1)
        from using                          0  (_merge==2)

    matched                         3,082,454  (_merge==3)
    -----------------------------------------

. 
. replace relationship = .a if (_merge == 1) & (missing(relationship))
(1,030 real changes made, 1,030 to missing)

. replace relationship = .m if (_merge == 3) & (missing(relationship))
(754 real changes made, 754 to missing)

. 
. assert (relationship != .)

. drop _merge

. 
. tab relationship, m

        relationship |      Freq.     Percent        Cum.
---------------------+-----------------------------------
            BIOCHILD |    661,315       21.45       21.45
              BIOMOM |    387,136       12.56       34.00
              BIODAD |    274,179        8.89       42.89
           STEPCHILD |     47,022        1.52       44.42
             STEPMOM |     16,676        0.54       44.96
             STEPDAD |     30,346        0.98       45.94
          ADOPTCHILD |     12,988        0.42       46.37
            ADOPTMOM |      6,740        0.22       46.58
            ADOPTDAD |      6,248        0.20       46.79
                 MOM |          6        0.00       46.79
                 DAD |          6        0.00       46.79
              SPOUSE |    516,182       16.74       63.53
          GRANDCHILD |     60,516        1.96       65.49
        GRANDCHILD_P |        599        0.02       65.51
         GRANDPARENT |     60,516        1.96       67.47
       GRANDPARENT_P |        599        0.02       67.49
             SIBLING |    605,542       19.64       87.13
             PARTNER |     48,960        1.59       88.72
             F_CHILD |      2,621        0.09       88.80
               CHILD |      7,274        0.24       89.04
            F_PARENT |      2,849        0.09       89.13
              PARENT |      7,262        0.24       89.37
           AUNTUNCLE |      6,234        0.20       89.57
 AUNTUNCLE_OR_PARENT |     17,793        0.58       90.15
     GREATGRANDCHILD |        427        0.01       90.16
    GREATGRANDPARENT |        427        0.01       90.17
         NEPHEWNIECE |      6,234        0.20       90.37
CHILD_OR_NEPHEWNIECE |     17,793        0.58       90.95
   SIBLING_OR_COUSIN |     15,468        0.50       91.45
               F_SIB |      3,931        0.13       91.58
           OTHER_REL |    144,258        4.68       96.26
         OTHER_REL_P |      2,990        0.10       96.36
               NOREL |     95,159        3.09       99.44
            DONTKNOW |     15,404        0.50       99.94
                  .a |      1,030        0.03       99.98
                  .m |        754        0.02      100.00
---------------------+-----------------------------------
               Total |  3,083,484      100.00

. 
. rename relfrom EPPPNUM

. rename relto to_EPPNUM

. 
. merge m:1 SSUID EPPPNUM SWAVE using "$tempdir/demo_long_interviews.dta"
(label errp already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                       143,700
        from master                         0  (_merge==1)
        from using                    143,700  (_merge==2)

    matched                         3,083,484  (_merge==3)
    -----------------------------------------

. 
. drop if _merge==2
(143,700 observations deleted)

. 
. drop _merge

. 
. tab relationship, m 

        relationship |      Freq.     Percent        Cum.
---------------------+-----------------------------------
            BIOCHILD |    661,315       21.45       21.45
              BIOMOM |    387,136       12.56       34.00
              BIODAD |    274,179        8.89       42.89
           STEPCHILD |     47,022        1.52       44.42
             STEPMOM |     16,676        0.54       44.96
             STEPDAD |     30,346        0.98       45.94
          ADOPTCHILD |     12,988        0.42       46.37
            ADOPTMOM |      6,740        0.22       46.58
            ADOPTDAD |      6,248        0.20       46.79
                 MOM |          6        0.00       46.79
                 DAD |          6        0.00       46.79
              SPOUSE |    516,182       16.74       63.53
          GRANDCHILD |     60,516        1.96       65.49
        GRANDCHILD_P |        599        0.02       65.51
         GRANDPARENT |     60,516        1.96       67.47
       GRANDPARENT_P |        599        0.02       67.49
             SIBLING |    605,542       19.64       87.13
             PARTNER |     48,960        1.59       88.72
             F_CHILD |      2,621        0.09       88.80
               CHILD |      7,274        0.24       89.04
            F_PARENT |      2,849        0.09       89.13
              PARENT |      7,262        0.24       89.37
           AUNTUNCLE |      6,234        0.20       89.57
 AUNTUNCLE_OR_PARENT |     17,793        0.58       90.15
     GREATGRANDCHILD |        427        0.01       90.16
    GREATGRANDPARENT |        427        0.01       90.17
         NEPHEWNIECE |      6,234        0.20       90.37
CHILD_OR_NEPHEWNIECE |     17,793        0.58       90.95
   SIBLING_OR_COUSIN |     15,468        0.50       91.45
               F_SIB |      3,931        0.13       91.58
           OTHER_REL |    144,258        4.68       96.26
         OTHER_REL_P |      2,990        0.10       96.36
               NOREL |     95,159        3.09       99.44
            DONTKNOW |     15,404        0.50       99.94
                  .a |      1,030        0.03       99.98
                  .m |        754        0.02      100.00
---------------------+-----------------------------------
               Total |  3,083,484      100.00

. 
. do "$sipp2008_code/simple_rel_label"

. 
. *** Define the label for our compact representation of relationships.
. capture label drop ultra_simple_rel

. local lnum = 1

. local llist ""

. foreach r in CHILD SIBLING GRANDCHILD OTHER_ADULT OTHER_CHILD {
  2.     local llist = `"`llist' `lnum' "`r'""'
  3.     local lnum = `lnum' + 1
  4. }

. label define ultra_simple_rel `llist'

. 
. 
end of do-file

. 
. save "$SIPP08keep/HHComp_asis.dta", $replace
(note: file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/SIPP08_Processed/HHComp_asis.dta not found)
file C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_data/SIPP08_Processed/HHComp_asis.dta saved

. 
. 
. 
. 
. 
. 
. 
end of do-file

. 
. 
. do "$childhh_base_code/childhh_epilog" "`logdir'" "`fname'"

. * Boilerplate epilog for ChildHH project.
. 
. display "Ending random number generator state"
Ending random number generator state

. display "`c(rngstate)'"
XAA0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> 000000000000000000000000000000000000000000000000000000000000000000000001000001391839

. log close
      name:  <unnamed>
       log:  C:\Users\Joanna/Dropbox/Repositories/SIPP_Breadwinning/DemographySupplement//stata_logs/create_HHComp_asis.log
  log type:  text
 closed on:   6 Dec 2019, 14:52:40
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
